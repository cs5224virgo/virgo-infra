---
# k3s
k3s_version: v1.28.2+k3s1
# ansible_user: netrunner
systemd_dir: /etc/systemd/system
k3s_server_ip: "{{ hostvars[groups['aws'][0]]['ansible_host'] | default(groups['aws'][0]) }}"
k3s_server_args: >-
  --node-ip '{{ k3s_node_ip | default(ansible_host) }}'
  --node-name '{{ k3s_node_name | default(inventory_host) }}'
  --cluster-cidr '10.11.0.0/16'
  --service-cidr '10.12.0.0/16'
  --cluster-dns '10.12.0.53'
  --flannel-iface 'wg0'
  --disable=servicelb
  {{ k3s_extra_server_args | default("") }}
k3s_agent_args: >-
  --node-ip '{{ k3s_node_ip | default(ansible_host) }}'
  --node-name '{{ k3s_node_name | default(inventory_host) }}'
  --flannel-iface 'wg0'
  {{ k3s_extra_agent_args | default("") }}
